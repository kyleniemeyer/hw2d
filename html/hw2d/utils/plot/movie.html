<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>hw2d.utils.plot.movie API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>hw2d.utils.plot.movie</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from typing import Iterable, Dict, Tuple, Any, Callable
import h5py
import fire
import numpy as np
import matplotlib.pyplot as plt
from tqdm import tqdm
from matplotlib.colors import ListedColormap
from matplotlib import animation
from mpl_toolkits.axes_grid1 import make_axes_locatable


def get_extended_viridis(vals: int = 600) -&gt; ListedColormap:
    &#34;&#34;&#34;
    Generate an extended viridis colormap.

    Args:
        vals (int): Number of color values. Default is 600.

    Returns:
        ListedColormap: A colormap object.
    &#34;&#34;&#34;
    VIRIDIS_EXTENDED = [
        [0.0, 255, 200, 100],
        [0.13, 255, 153, 51],
        [0.25, 230, 5, 40],
        [0.38, 150, 3, 62],
        [0.5, 68, 1, 84],
        [0.55, 72, 33, 115],
        [0.59, 67, 62, 133],
        [0.64, 56, 88, 140],
        [0.68, 45, 112, 142],
        [0.73, 37, 133, 142],
        [0.77, 30, 155, 138],
        [0.82, 42, 176, 127],
        [0.86, 82, 197, 105],
        [0.90, 34, 213, 73],
        [0.95, 194, 223, 35],
        [1.0, 253, 231, 37],
    ]
    VE = np.array(VIRIDIS_EXTENDED)
    VE[:, 1:] = VE[:, 1:] / 256
    ve_list = []
    for i in range(1, len(VIRIDIS_EXTENDED)):
        pts = int((VE[i, 0] - VE[i - 1, 0]) * vals)
        ve_list.append(
            np.stack(
                [
                    np.linspace(VE[i - 1, 1], VE[i, 1], pts, endpoint=False),
                    np.linspace(VE[i - 1, 2], VE[i, 2], pts, endpoint=False),
                    np.linspace(VE[i - 1, 3], VE[i, 3], pts, endpoint=False),
                ],
                axis=-1,
            )
        )
    VE = np.vstack(ve_list)
    return ListedColormap(VE)


def new_cbar_max(nm: float, pm: float) -&gt; float:
    &#34;&#34;&#34;
    Adjust maximum of colorbar using sqrt diff scaling.

    Args:
        nm (float): Negative maximum.
        pm (float): Positive maximum.

    Returns:
        float: Adjusted maximum.
    &#34;&#34;&#34;
    if pm &gt; nm:
        nm = nm + np.sqrt(pm - nm)
    return nm


def new_cbar_max_smooth(nm: float, pm: float) -&gt; float:
    &#34;&#34;&#34;
    Adjust maximum of colorbar using average scaling for a smoother effect.

    Args:
        nm (float): Negative maximum.
        pm (float): Positive maximum.

    Returns:
        float: Adjusted maximum.
    &#34;&#34;&#34;
    if pm &gt; nm:
        nm = (nm + pm) / 2
    return nm


def setup_visualization(
    axarr: Iterable[Any],
    plasma_steps: Iterable[Dict[str, float]],
    params: Dict[str, float],
    plot_order: Iterable[str],
    cmap: Any,
) -&gt; Tuple[Iterable[Any], Iterable[Any], Iterable[Any], Iterable[Any]]:
    &#34;&#34;&#34;Setup initial chart objects.&#34;&#34;&#34;
    ims, cxs, cbs, txs = [], [], [], []
    for i, ax in enumerate(axarr):
        ax.xaxis.set_tick_params(
            which=&#34;both&#34;, bottom=False, top=False, labelbottom=False
        )
        ax.yaxis.set_tick_params(
            which=&#34;both&#34;, bottom=False, top=False, labelbottom=False
        )
        cxs.append(make_axes_locatable(ax).append_axes(&#34;right&#34;, &#34;5%&#34;, &#34;1%&#34;))
        ims.append(ax.imshow(plasma_steps[plot_order[i]][0], origin=&#34;lower&#34;, cmap=cmap))
        cbs.append(plt.colorbar(ims[i], cax=cxs[i]))
        txs.append(ax.set_title(f&#34;{plot_order[i]}&#34;))
    return ims, cxs, cbs, txs


def setup_figure(title: str) -&gt; Tuple[plt.Figure, np.ndarray]:
    &#34;&#34;&#34;
    Setup the figure for visualization.

    Args:
        title (str): Title for the figure.

    Returns:
        Tuple containing the figure and array of axes.
    &#34;&#34;&#34;
    fig, axarr = plt.subplots(1, 3, figsize=(12, 4.35), sharex=True, sharey=True)
    fig.suptitle(title)
    return fig, axarr


def time_to_length(time: int, dt: float) -&gt; int:
    &#34;&#34;&#34;Convert time to length based on the given time step.&#34;&#34;&#34;
    return int(round(time / dt))


def create_movie(
    input_filename: str,
    output_filename: str,
    t0: int = 0,
    t1: int = None,
    zero_omega: bool = False,
    plot_order: Iterable[str] = [&#34;density&#34;, &#34;omega&#34;, &#34;phi&#34;],
    cmap: ListedColormap = get_extended_viridis(),
    min_fps: float = 10,
    dpi: int = 75,
    speed: float = 1,
) -&gt; None:
    # Setup details
    plasma_steps = h5py.File(input_filename, &#34;r&#34;)
    params = dict(plasma_steps.attrs)
    title = generate_title(params)
    if t1 is None:
        t1 = (len(plasma_steps[plot_order[0]]) - 1) * params[&#34;frame_dt&#34;]
    t0_idx = time_to_length(t0 - params.get(&#34;t0&#34;, 0), params[&#34;frame_dt&#34;])
    t1_idx = time_to_length(t1 - params.get(&#34;t0&#34;, 0), params[&#34;frame_dt&#34;])
    # Determine fps and step size to use
    fps = int(speed / params[&#34;frame_dt&#34;])
    print(f&#34;{speed}t/s  @  {params[&#39;frame_dt&#39;]} t/frame  implies {fps} frames/s&#34;)
    frame_steps = max(1, fps // min_fps)
    fps /= frame_steps
    print(
        f&#34;with min_fps {min_fps} we take every {frame_steps} frames still generate {fps} frame/s&#34;
    )
    # Define Progress
    total = int((t1_idx - t0_idx) // frame_steps)
    frame_range = range(t0_idx, t1_idx + 1, frame_steps)
    pbar = tqdm(total=total, smoothing=0.3)
    # Setup Figure &amp; Animation
    fig, axarr = setup_figure(title)
    ims, cxs, cbs, txs = setup_visualization(
        axarr, plasma_steps, params, plot_order, cmap
    )
    fig.subplots_adjust(top=0.94, bottom=0, right=0.95, left=0.01, hspace=0, wspace=0.2)
    # Animation
    writer = animation.writers[&#34;ffmpeg&#34;](fps=fps, metadata=dict(artist=&#34;Robin Greif&#34;))

    def animate(t_idx: int):
        &#34;&#34;&#34;Update data for animation.&#34;&#34;&#34;
        for i, ax in enumerate(axarr):
            field_name = plot_order[i]
            arr = plasma_steps[field_name][t_idx]
            if zero_omega and field_name == &#34;omega&#34;:
                arr -= np.mean(arr)
            vmax = np.max(arr)
            vmin = np.min(arr)
            pmin, pmax = ims[i].get_clim()
            pm = np.max([np.abs(pmin), pmax])
            nm = np.max([np.abs(vmin), vmax])
            nm = new_cbar_max_smooth(nm, pm)
            ims[i].set_data(arr)
            ims[i].set_clim(-nm, nm)
            txs[i].set_text(f&#34;{field_name} (t={t_idx*params[&#39;frame_dt&#39;]:.0f})&#34;)
        pbar.update(1)

    ani = animation.FuncAnimation(fig, animate, frames=frame_range)
    # Save Movie
    output_filename = f&#34;{output_filename}_dpi={dpi}_fps={fps:.0f}_speed={speed:.0f}_t0={t0}_t1={t1}.mp4&#34;
    ani.save(output_filename, writer=writer, dpi=dpi)
    plt.close()
    plasma_steps.close()
    print(f&#34;{output_filename}&#34;)


def generate_title(params: Dict[str, float]) -&gt; str:
    return &#34;,  &#34;.join(
        [
            f&#34;c1={params[&#39;c1&#39;]}&#34;,
            # f&#34;L={params[&#39;L&#39;]:.2f}&#34;,
            f&#34;k0={params[&#39;k0&#39;]:.2f}&#34;,
            f&#34;pts={params[&#39;grid_pts&#39;]:.0f}&#34;,
            f&#34;dt={params[&#39;dt&#39;]}&#34;,
            f&#34;N={params[&#39;N&#39;]:.0f}&#34;,
            f&#34;nu={params[&#39;nu&#39;]:.2g}&#34;,
        ]
    )


def main(
    input_path: str,
    output_path: str,
    t0: int = 0,
    t1: int or None = None,
    plot_order: Iterable = (&#34;density&#34;, &#34;omega&#34;, &#34;phi&#34;),
    dpi: int = 75,
    min_fps: int = 10,
    speed: int = 10,
) -&gt; None:
    create_movie(
        input_filename=input_path,
        output_filename=output_path,
        t0=t0,
        t1=t1,
        plot_order=plot_order,
        min_fps=min_fps,
        dpi=dpi,
        speed=speed,
    )


if __name__ == &#34;__main__&#34;:
    fire.Fire(main)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="hw2d.utils.plot.movie.create_movie"><code class="name flex">
<span>def <span class="ident">create_movie</span></span>(<span>input_filename: str, output_filename: str, t0: int = 0, t1: int = None, zero_omega: bool = False, plot_order: Iterable[str] = ['density', 'omega', 'phi'], cmap: matplotlib.colors.ListedColormap = &lt;matplotlib.colors.ListedColormap object&gt;, min_fps: float = 10, dpi: int = 75, speed: float = 1) ‑> None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_movie(
    input_filename: str,
    output_filename: str,
    t0: int = 0,
    t1: int = None,
    zero_omega: bool = False,
    plot_order: Iterable[str] = [&#34;density&#34;, &#34;omega&#34;, &#34;phi&#34;],
    cmap: ListedColormap = get_extended_viridis(),
    min_fps: float = 10,
    dpi: int = 75,
    speed: float = 1,
) -&gt; None:
    # Setup details
    plasma_steps = h5py.File(input_filename, &#34;r&#34;)
    params = dict(plasma_steps.attrs)
    title = generate_title(params)
    if t1 is None:
        t1 = (len(plasma_steps[plot_order[0]]) - 1) * params[&#34;frame_dt&#34;]
    t0_idx = time_to_length(t0 - params.get(&#34;t0&#34;, 0), params[&#34;frame_dt&#34;])
    t1_idx = time_to_length(t1 - params.get(&#34;t0&#34;, 0), params[&#34;frame_dt&#34;])
    # Determine fps and step size to use
    fps = int(speed / params[&#34;frame_dt&#34;])
    print(f&#34;{speed}t/s  @  {params[&#39;frame_dt&#39;]} t/frame  implies {fps} frames/s&#34;)
    frame_steps = max(1, fps // min_fps)
    fps /= frame_steps
    print(
        f&#34;with min_fps {min_fps} we take every {frame_steps} frames still generate {fps} frame/s&#34;
    )
    # Define Progress
    total = int((t1_idx - t0_idx) // frame_steps)
    frame_range = range(t0_idx, t1_idx + 1, frame_steps)
    pbar = tqdm(total=total, smoothing=0.3)
    # Setup Figure &amp; Animation
    fig, axarr = setup_figure(title)
    ims, cxs, cbs, txs = setup_visualization(
        axarr, plasma_steps, params, plot_order, cmap
    )
    fig.subplots_adjust(top=0.94, bottom=0, right=0.95, left=0.01, hspace=0, wspace=0.2)
    # Animation
    writer = animation.writers[&#34;ffmpeg&#34;](fps=fps, metadata=dict(artist=&#34;Robin Greif&#34;))

    def animate(t_idx: int):
        &#34;&#34;&#34;Update data for animation.&#34;&#34;&#34;
        for i, ax in enumerate(axarr):
            field_name = plot_order[i]
            arr = plasma_steps[field_name][t_idx]
            if zero_omega and field_name == &#34;omega&#34;:
                arr -= np.mean(arr)
            vmax = np.max(arr)
            vmin = np.min(arr)
            pmin, pmax = ims[i].get_clim()
            pm = np.max([np.abs(pmin), pmax])
            nm = np.max([np.abs(vmin), vmax])
            nm = new_cbar_max_smooth(nm, pm)
            ims[i].set_data(arr)
            ims[i].set_clim(-nm, nm)
            txs[i].set_text(f&#34;{field_name} (t={t_idx*params[&#39;frame_dt&#39;]:.0f})&#34;)
        pbar.update(1)

    ani = animation.FuncAnimation(fig, animate, frames=frame_range)
    # Save Movie
    output_filename = f&#34;{output_filename}_dpi={dpi}_fps={fps:.0f}_speed={speed:.0f}_t0={t0}_t1={t1}.mp4&#34;
    ani.save(output_filename, writer=writer, dpi=dpi)
    plt.close()
    plasma_steps.close()
    print(f&#34;{output_filename}&#34;)</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.generate_title"><code class="name flex">
<span>def <span class="ident">generate_title</span></span>(<span>params: Dict[str, float]) ‑> str</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def generate_title(params: Dict[str, float]) -&gt; str:
    return &#34;,  &#34;.join(
        [
            f&#34;c1={params[&#39;c1&#39;]}&#34;,
            # f&#34;L={params[&#39;L&#39;]:.2f}&#34;,
            f&#34;k0={params[&#39;k0&#39;]:.2f}&#34;,
            f&#34;pts={params[&#39;grid_pts&#39;]:.0f}&#34;,
            f&#34;dt={params[&#39;dt&#39;]}&#34;,
            f&#34;N={params[&#39;N&#39;]:.0f}&#34;,
            f&#34;nu={params[&#39;nu&#39;]:.2g}&#34;,
        ]
    )</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.get_extended_viridis"><code class="name flex">
<span>def <span class="ident">get_extended_viridis</span></span>(<span>vals: int = 600) ‑> matplotlib.colors.ListedColormap</span>
</code></dt>
<dd>
<div class="desc"><p>Generate an extended viridis colormap.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>vals</code></strong> :&ensp;<code>int</code></dt>
<dd>Number of color values. Default is 600.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>ListedColormap</code></dt>
<dd>A colormap object.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_extended_viridis(vals: int = 600) -&gt; ListedColormap:
    &#34;&#34;&#34;
    Generate an extended viridis colormap.

    Args:
        vals (int): Number of color values. Default is 600.

    Returns:
        ListedColormap: A colormap object.
    &#34;&#34;&#34;
    VIRIDIS_EXTENDED = [
        [0.0, 255, 200, 100],
        [0.13, 255, 153, 51],
        [0.25, 230, 5, 40],
        [0.38, 150, 3, 62],
        [0.5, 68, 1, 84],
        [0.55, 72, 33, 115],
        [0.59, 67, 62, 133],
        [0.64, 56, 88, 140],
        [0.68, 45, 112, 142],
        [0.73, 37, 133, 142],
        [0.77, 30, 155, 138],
        [0.82, 42, 176, 127],
        [0.86, 82, 197, 105],
        [0.90, 34, 213, 73],
        [0.95, 194, 223, 35],
        [1.0, 253, 231, 37],
    ]
    VE = np.array(VIRIDIS_EXTENDED)
    VE[:, 1:] = VE[:, 1:] / 256
    ve_list = []
    for i in range(1, len(VIRIDIS_EXTENDED)):
        pts = int((VE[i, 0] - VE[i - 1, 0]) * vals)
        ve_list.append(
            np.stack(
                [
                    np.linspace(VE[i - 1, 1], VE[i, 1], pts, endpoint=False),
                    np.linspace(VE[i - 1, 2], VE[i, 2], pts, endpoint=False),
                    np.linspace(VE[i - 1, 3], VE[i, 3], pts, endpoint=False),
                ],
                axis=-1,
            )
        )
    VE = np.vstack(ve_list)
    return ListedColormap(VE)</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>input_path: str, output_path: str, t0: int = 0, t1: int = None, plot_order: Iterable = ('density', 'omega', 'phi'), dpi: int = 75, min_fps: int = 10, speed: int = 10) ‑> None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main(
    input_path: str,
    output_path: str,
    t0: int = 0,
    t1: int or None = None,
    plot_order: Iterable = (&#34;density&#34;, &#34;omega&#34;, &#34;phi&#34;),
    dpi: int = 75,
    min_fps: int = 10,
    speed: int = 10,
) -&gt; None:
    create_movie(
        input_filename=input_path,
        output_filename=output_path,
        t0=t0,
        t1=t1,
        plot_order=plot_order,
        min_fps=min_fps,
        dpi=dpi,
        speed=speed,
    )</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.new_cbar_max"><code class="name flex">
<span>def <span class="ident">new_cbar_max</span></span>(<span>nm: float, pm: float) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Adjust maximum of colorbar using sqrt diff scaling.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>nm</code></strong> :&ensp;<code>float</code></dt>
<dd>Negative maximum.</dd>
<dt><strong><code>pm</code></strong> :&ensp;<code>float</code></dt>
<dd>Positive maximum.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>float</code></dt>
<dd>Adjusted maximum.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def new_cbar_max(nm: float, pm: float) -&gt; float:
    &#34;&#34;&#34;
    Adjust maximum of colorbar using sqrt diff scaling.

    Args:
        nm (float): Negative maximum.
        pm (float): Positive maximum.

    Returns:
        float: Adjusted maximum.
    &#34;&#34;&#34;
    if pm &gt; nm:
        nm = nm + np.sqrt(pm - nm)
    return nm</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.new_cbar_max_smooth"><code class="name flex">
<span>def <span class="ident">new_cbar_max_smooth</span></span>(<span>nm: float, pm: float) ‑> float</span>
</code></dt>
<dd>
<div class="desc"><p>Adjust maximum of colorbar using average scaling for a smoother effect.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>nm</code></strong> :&ensp;<code>float</code></dt>
<dd>Negative maximum.</dd>
<dt><strong><code>pm</code></strong> :&ensp;<code>float</code></dt>
<dd>Positive maximum.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>float</code></dt>
<dd>Adjusted maximum.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def new_cbar_max_smooth(nm: float, pm: float) -&gt; float:
    &#34;&#34;&#34;
    Adjust maximum of colorbar using average scaling for a smoother effect.

    Args:
        nm (float): Negative maximum.
        pm (float): Positive maximum.

    Returns:
        float: Adjusted maximum.
    &#34;&#34;&#34;
    if pm &gt; nm:
        nm = (nm + pm) / 2
    return nm</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.setup_figure"><code class="name flex">
<span>def <span class="ident">setup_figure</span></span>(<span>title: str) ‑> Tuple[matplotlib.figure.Figure, numpy.ndarray]</span>
</code></dt>
<dd>
<div class="desc"><p>Setup the figure for visualization.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>title</code></strong> :&ensp;<code>str</code></dt>
<dd>Title for the figure.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Tuple containing the figure and array of axes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setup_figure(title: str) -&gt; Tuple[plt.Figure, np.ndarray]:
    &#34;&#34;&#34;
    Setup the figure for visualization.

    Args:
        title (str): Title for the figure.

    Returns:
        Tuple containing the figure and array of axes.
    &#34;&#34;&#34;
    fig, axarr = plt.subplots(1, 3, figsize=(12, 4.35), sharex=True, sharey=True)
    fig.suptitle(title)
    return fig, axarr</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.setup_visualization"><code class="name flex">
<span>def <span class="ident">setup_visualization</span></span>(<span>axarr: Iterable[Any], plasma_steps: Iterable[Dict[str, float]], params: Dict[str, float], plot_order: Iterable[str], cmap: Any) ‑> Tuple[Iterable[Any], Iterable[Any], Iterable[Any], Iterable[Any]]</span>
</code></dt>
<dd>
<div class="desc"><p>Setup initial chart objects.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setup_visualization(
    axarr: Iterable[Any],
    plasma_steps: Iterable[Dict[str, float]],
    params: Dict[str, float],
    plot_order: Iterable[str],
    cmap: Any,
) -&gt; Tuple[Iterable[Any], Iterable[Any], Iterable[Any], Iterable[Any]]:
    &#34;&#34;&#34;Setup initial chart objects.&#34;&#34;&#34;
    ims, cxs, cbs, txs = [], [], [], []
    for i, ax in enumerate(axarr):
        ax.xaxis.set_tick_params(
            which=&#34;both&#34;, bottom=False, top=False, labelbottom=False
        )
        ax.yaxis.set_tick_params(
            which=&#34;both&#34;, bottom=False, top=False, labelbottom=False
        )
        cxs.append(make_axes_locatable(ax).append_axes(&#34;right&#34;, &#34;5%&#34;, &#34;1%&#34;))
        ims.append(ax.imshow(plasma_steps[plot_order[i]][0], origin=&#34;lower&#34;, cmap=cmap))
        cbs.append(plt.colorbar(ims[i], cax=cxs[i]))
        txs.append(ax.set_title(f&#34;{plot_order[i]}&#34;))
    return ims, cxs, cbs, txs</code></pre>
</details>
</dd>
<dt id="hw2d.utils.plot.movie.time_to_length"><code class="name flex">
<span>def <span class="ident">time_to_length</span></span>(<span>time: int, dt: float) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Convert time to length based on the given time step.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def time_to_length(time: int, dt: float) -&gt; int:
    &#34;&#34;&#34;Convert time to length based on the given time step.&#34;&#34;&#34;
    return int(round(time / dt))</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="hw2d.utils.plot" href="index.html">hw2d.utils.plot</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="hw2d.utils.plot.movie.create_movie" href="#hw2d.utils.plot.movie.create_movie">create_movie</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.generate_title" href="#hw2d.utils.plot.movie.generate_title">generate_title</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.get_extended_viridis" href="#hw2d.utils.plot.movie.get_extended_viridis">get_extended_viridis</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.main" href="#hw2d.utils.plot.movie.main">main</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.new_cbar_max" href="#hw2d.utils.plot.movie.new_cbar_max">new_cbar_max</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.new_cbar_max_smooth" href="#hw2d.utils.plot.movie.new_cbar_max_smooth">new_cbar_max_smooth</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.setup_figure" href="#hw2d.utils.plot.movie.setup_figure">setup_figure</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.setup_visualization" href="#hw2d.utils.plot.movie.setup_visualization">setup_visualization</a></code></li>
<li><code><a title="hw2d.utils.plot.movie.time_to_length" href="#hw2d.utils.plot.movie.time_to_length">time_to_length</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>